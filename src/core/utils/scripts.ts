import {
  applyParamsToScript,
  SpendingValidator,
  Lucid,
  WithdrawalValidator,
  applyDoubleCborEncoding,
} from "lucid-cardano";
import { getLucid } from "./utils.js";

function bytesToValidator(bytes: string) {
  const script: SpendingValidator = {
    type: "PlutusV2",
    script: bytes,
  };
  return script;
}

export async function deployCollateralStakingValidator(lucid: Lucid) {
  const { collateralRewardAddress } = await getValidators();
  const tx = await lucid
    .newTx()
    .registerStake(collateralRewardAddress)
    .complete();
  const signedTx = await tx.sign().complete();
  await signedTx.submit();
}

export async function deployLoanStakingValidator(lucid: Lucid) {
  const { loanRewardAddress } = await getValidators();
  const tx = await lucid.newTx().registerStake(loanRewardAddress).complete();
  const signedTx = await tx.sign().complete();
  await signedTx.submit();
}

// (async () => {
//   const lucid = await getLucid();
//   lucid.selectWalletFromPrivateKey(
//     "ed25519_sk1fucr3z9tfwavty6ntgdxx4md7umsp9yyhf7n0axvsxctlneuyetspmafej"
//   );
//   await deployCollateralStakingValidator(lucid);
// })();

export async function getValidators() {
  const lucid = await getLucid();

  const interestValidatorCBOR =
    "59012701000032323232323223232232253330073322323300100100322533300e00114a0264a66601866e3cdd718080010020a511330030030013010001375860166018601860186018601860186018601860126ea8c02cc024dd50009bae300b300c300c300c300c3009375400c29309b2b2999802980198031baa00113232533300a300c002149858dd6980500098039baa00116325333004300230053754006264646464646464646464a66602260260042646493180600218058038b1bae30110013011002300f001300f002375a601a002601a004601600260160046eb4c024004c018dd50018b12999802180118029baa001132323232533300b300d002149858dd7180580098058011bae3009001300637540022c6e1d20005734aae7555cf2ab9f5742ae881";
  const collateralValidatorCBOR =
    "5915ac0100003232323232323232323232323232323232232223253333330160021532323233301130013013375400a2a6602492012052756e6e696e672032206172672076616c696461746f7220776974686472617700132533301232533233014300130163754004264a66602a600a602e6ea80044c94ccc058c01cc060dd5000899919191919191919191919191919191919119180c98019980299198008008011129998178008a5eb804cc0c0c8c94ccc0b4c068c0bcdd500089919191918119981b180a181a1baa001330363015303437540066606c602a60686ea8004cc0d8c064c0d0dd50019981b1809181a1baa0034bd7018080029980b000817299999981b00088008a998178168b0a998178168b0a998178168b0a998178168b181998181baa001153302e02b163012302f3754002606200266004004606400266664444646600200200a44a666066002297ae013232533303130223033375400226600800800426606c606e60686ea8004cc010010008c94ccc0c4c078c0ccdd50008991919191919299981ba99981b99b883253330383029303a375400226eb4c0f8c0ecdd50008a9981c8190b180d181d1baa301a303a375401866e00dd6981e981f181f181f181f181f181f181d1baa005375a607a607c607c607c607c607c60746ea801454ccc0dc00454ccc0dc008400c5280a5014a02a6607092113496e7075742069732076616c6964313131313100130293303c30293303c3019303a375400a66078603660746ea8014cc0f0c054c0e8dd50029981e180c181d1baa0053303c3016303a375400a97ae04bd700a9981c24811e496e70757420697320696e76616c696432333133333132333133313333310014c103d87a800032323300100100c22533303d00114a0264a66607466e3cdd718200010020a511330030030013040001375c6078607a607a607a607a607a607a607a607a607a607a60726ea8010cdc39bad3019303837540166eb4c04cc0e0dd500199b87375a602e606e6ea8028dd6980b181b9baa0025333033302330353754002264a6660700022a6606a0622c26464a6660740022a6606e0662c26464a6660780022a6607206a2c26464a66607c0022a6607606e2c26464a6660800022a6607a0722c26464a6660840022a6607e0762c26464a6660880022a6608207a2c26464a66608c0022a6608607e2c26464a6660900022a6608a0822c26464a6660940022a6608e0862c26464a6660980022a6609208a2c264a66609a60a00042646464931981a8078241981a009023998198098230a998250230b1929999998288008a998250230b0a998250230b0a998250230b0a998250230b09bae001304e001304e00232533333304f0011533048044161533048044161533048044161375a0022a660900882c6098002609800464a66666609a0022a6608c0842c2a6608c0842c2a6608c0842c26eb400454cc11810858c128004c128008c94cccccc12c00454cc1101005854cc1101005854cc1101005854cc110100584dd7000982400098240011929999998248008a9982101f0b0a9982101f0b0a9982101f0b09bad001153304203e1630460013046002325333333047001153304003c16153304003c16153304003c161375a0022a660800782c6088002608800464a66666608a00220022a6607c0742c2a6607c0742c2a6607c0742c2a6607c0742c6084002608400464a6666660860022a660780702c2a660780702c2a660780702c26eb400454cc0f00e058c100004c100008c94cccccc104004400454cc0e80d85854cc0e80d85854cc0e80d85854cc0e80d858c0f8004c0f8008c94cccccc0fc004400454cc0e00d05854cc0e00d05854cc0e00d05854cc0e00d058c0f0004c0f0008c94cccccc0f400454cc0d80c85854cc0d80c85854cc0d80c8584dd68008a9981b0190b181d000981b1baa001153303403016533333303a0011001153303302f16153303302f16153303302f16153303302f163037303437540022a6606492015b65787065637420496e6c696e65446174756d28636f6c6c61746572616c5f646174756d29203d0a2020202020202020696e7075745f66726f6d5f636f6c6c61746572616c5f76616c696461746f722e6f75747075742e646174756d0016301630333754602860666ea8c0d8008c0d8004cc038dd6180618161baa300c302c375403a464a6660566038605a6ea80044cdc78021bae3031302e37540022940c034c0b4dd5180698169baa300e302d37540026466600200200498106d8799f0000ff00222533303000210011333003003303300232301f33032375066e00dd6980818181baa002375a602060606ea8004cc0c8dd419b80375a602260606ea8008dd6980898181baa0014bd7018061819001180418161baa300c302c375403a6eb0c01cc0b0dd5180618161baa01d3300d3758601c60566ea8c02cc0acdd500e1192999815180d98161baa00113371e0406eb8c0c0c0b4dd50008a50300c302c3754601860586ea8004c004004894ccc0ac00452000133700900119801001181700098008009112999815000880109998018019919198008008021129998168008a5eb804c8c94ccc0accdd7801002880089981800119802002000981880118178009816000981680091814981518151815181518151815181518150009181418149814981498149814981498148009192999811180798121baa001132323253330253375e601260506ea8008c034c0a0dd5001099180c198159ba8337020026eb4c030c0a4dd5001998159ba8337020026eb4c024c0a4dd5001a5eb80ccc038dd5980498141baa005375c601060506ea8c024c0a0dd50011bae300930283754601260506ea80084c05ccc0a8dd41998071bab30093028375400a6eb8c020c0a0dd5180498141baa002375c601260506ea8c024c0a0dd5001198151ba833300e3756601260506ea8014dd7180418141baa300d302837540046eb8c024c0a0dd5180698141baa0024bd7019805800811a99999981580088008a998120110b0a998120110b0a998120110b0a998120110b181418129baa0011533023020163007302437540024604c604e604e604e604e0024604a604c604c604c604c604c604c604c604c604c0024604800246046604800244646600200200644a666046002297ae013232533302130050021330260023300400400113300400400130270023025001230213022302200122533301b300b301d3754004264a6660400022a6603a0042c26464a6660440022a6603e0082c26464a6660480022a6604200c2c26464a66604c0022a660460102c26464a6660500022a6604a0142c264a6660526058004264649319808002006198078038058a998130058b1929999998168008a998130058b0a998130058b0a998130058b0a998130058b09bae001302a001302a00232533333302b0011001153302400916153302400916153302400916153302400916302800130280023253333330290011533022007161533022007161533022007161375a0022a6604400e2c604c002604c00464a66666604e00220022a6604000a2c2a6604000a2c2a6604000a2c2a6604000a2c6048002604800464a66666604a0022a6603c0062c2a6603c0062c2a6603c0062c26eb400454cc07800c58c088004c078dd50010a9980e0008b1180f98101810181000091119299980d9806180e9baa0011480004dd69810980f1baa00132533301b300c301d3754002298103d87a80001323300100137566044603e6ea8008894ccc084004530103d87a8000132323253330203371e00e6eb8c08800c4c048cc094dd4000a5eb804cc014014008dd698110011812801181180099198008008021129998100008a6103d87a80001323232533301f3371e00e6eb8c08400c4c044cc090dd3000a5eb804cc014014008dd598108011812001181100091299980c1804180d1baa002132533301d001153301a0021613232533301f001153301c0041613253330203023002149854cc07401458c94cccccc09000454cc0740145854cc0740145854cc0740145854cc074014584dd7000981080098108011929999998110008a9980d8018b0a9980d8018b0a9980d8018b0a9980d8018b09bae001301f001301b37540042a660320022c6eb8c070c064dd50008a9980b8088b180d980c1baa001153301601016301a301737540046e1d2004153301449015865787065637420536372697074436f6e74657874207b207472616e73616374696f6e3a205f74782c20707572706f73653a20576974686472617746726f6d287374616b655f6372656429207d203d0a2020202020206374780016301830193015375400c2930a99809a491856616c696461746f722072657475726e65642066616c736500136565333333019006153301200d16153301200d16153301200d161375a00c2a6602401a2c2a660249211d52756e6e696e672033206172672076616c696461746f72207370656e640013323223232253330173253330183008301a3754600260366ea80104c8c94ccc068cc88c8cc00400400c894ccc088004528099299980f99b8f375c604a00400829444cc00c00c004c094004dd6181018109810981098109810981098109810980e9baa3003301d37540086eb8c008c074dd500488008a503371066e00dd6980f98101810181018101810180e1baa008375a603e60406040604060406040604060386ea8020c94ccc068c02cc070dd500089bad3020301d37540022a660360282c600460386ea8c008c070dd51800980e1baa3002301c37540064603e60406040604060406040604060400022646464a6660366018603a6ea80044c8cc88c8cc00400400c894ccc090004528099299981099baf0043023302700214a2266006006002604e0026eacc088c08cc08cc08cc08cc08cc08c004c038cc084c014c07cdd51811180f9baa33223233001001003225333024001153302149011b657870656374205b696e7075742c202e2e5d203d20696e70757473001613253330213375e601460486ea80040104c09cc0a0c090dd5000899801801981400118130009bac30220013022301f375400497ae0301e37540042a6603892014765787065637420536372697074436f6e74657874207b207472616e73616374696f6e3a2074782c20707572706f73653a205370656e64286f776e5f72656629207d203d20637478001630203021002301f001301b37540044603c0022930a9980c2491856616c696461746f722072657475726e65642066616c736500136565333015300530173754002264a6660340022a6602e01c2c264a666036603c0042649319299980c1804000899299980e8008a9980d0088b099299980f18108010a4c2a660360242c64a6666660440022a660360242c2a660360242c2a660360242c26eb400454cc06c04858c07c004c06cdd50010a99980c1804800899299980e8008a9980d0088b099299980f18108010a4c2a660360242c64a6666660440022a660360242c2a660360242c2a660360242c26eb400454cc06c04858c07c004c06cdd50010a9980c8080b180c9baa001153301800f1632533333301f0011001153301800f16153301800f16153301800f16153301800f16301c001301837540022a6602c01a2ca66666603800220022a6602a0182c2a6602a0182c2a6602a0182c2a6602a0182c64a6660266006602a6ea80084c94ccc06000454cc054034584c8c94ccc06800454cc05c03c584c8c94ccc07000454cc064044584c8c94ccc07800454cc06c04c584c8c94ccc08000454cc074054584c8c94ccc08800454cc07c05c584c8c94ccc09000454cc084064584c8c94ccc09800454cc08c06c584c8c94ccc0a000454cc094074584c8c94ccc0a800454cc09c07c584c8c94ccc0b000454cc0a4084584c94ccc0b4c0c00084c8c8c9263301900f0243301801202333017013022153302a02216325333333031001153302a02216153302a02216153302a02216153302a022161375c002605c002605c00464a66666605e0022a660500402c2a660500402c2a660500402c26eb400454cc0a008058c0b0004c0b0008c94cccccc0b400454cc0980785854cc0980785854cc098078584dd68008a9981300f0b181500098150011929999998158008a9981200e0b0a9981200e0b0a9981200e0b0a9981200e0b09bae00130280013028002325333333029001153302201a16153302201a16153302201a161375a0022a660440342c604c002604c00464a66666604e0022a660400302c2a660400302c2a660400302c26eb400454cc08006058c090004c090008c94cccccc094004400454cc0780585854cc0780585854cc0780585854cc07805858c088004c088008c94cccccc08c00454cc0700505854cc0700505854cc070050584dd68008a9980e00a0b1810000981000119299999981080088008a9980d0090b0a9980d0090b0a9980d0090b0a9980d0090b180f000980f00119299999980f80088008a9980c0080b0a9980c0080b0a9980c0080b0a9980c0080b180e000980e00119299999980e8008a9980b0070b0a9980b0070b0a9980b0070b09bad001153301600e16301a001301637540042a660280182c44a6660286008602c6ea80084c94ccc06400454cc058008584c8c94ccc06c00454cc060010584c94ccc070c07c0085261533019005163253333330200011533019005161533019005161533019005161533019005161375c002603a002603a00464a66666603c0022a6602e0062c2a6602e0062c2a6602e0062c2a6602e0062c26eb8004c06c004c05cdd50010a9980a8008b299999980c80308030a998090050b0a998090050b0a998090050b0a998090050b180b980a1baa005370e90001b8748008dd2a40002a6601e0022c2a6601e0022c2a6601e0022c2a6601e0022c92191496e636f72726563742072656465656d6572207479706520666f722076616c696461746f72207370656e642e0a2020202020202020202020202020202020202020446f75626c6520636865636b20796f7520686176652077726170706564207468652072656465656d657220747970652061732073706563696669656420696e20796f757220706c757475732e6a736f6e00375c0029211272656465656d65723a2052656465656d657200490116646174756d3a20436f6c6c61746572616c446174756d004901396578706563742046696e697465286c6f7765725f626f756e6429203d2072616e67652e6c6f7765725f626f756e642e626f756e645f747970650049014765787065637420496e6c696e652853637269707443726564656e7469616c28636f6c6c61746572616c5f76616c696461746f725f686173682929203d207374616b655f637265640049010e5f72656465656d65723a20496e740049014165787065637420636f6c6c61746572616c5f646174756d5f74797065643a20436f6c6c61746572616c446174756d203d20636f6c6c61746572616c5f646174756d0049013165787065637420496e6c696e65446174756d28696e7465726573745f646174756d29203d206f75747075742e646174756d0049013b65787065637420696e7465726573745f646174756d5f74797065643a20496e746572657374446174756d203d20696e7465726573745f646174756d005734ae7155ceaab9e5573eae815d0aba257481";
  const loanValidatorCBOR =
    "59164b01000032323232323232323232323232323232232223253333330150021532323233301030013012375400a2a6602292012052756e6e696e672032206172672076616c696461746f7220776974686472617700132533301132533233013300130153754004264a666028600a602c6ea80044c94ccc054c01cc05cdd50008999191919191919191919191919191919119180c1801998029919980080080125eb808894ccc0b800840044ccc00c00cc0c4008c8c94ccc0b0c068c0b8dd50008991919192999818181098191baa00113233036302433036375066e00dd6980a181a1baa0013330163756602a60686ea801cdd7180a181a1baa3015303437540086eb8c054c0d0dd5180a981a1baa004330363015303437540086606c6ea0cdc01bad3011303437540086eb4c044c0d0dd50009981b180b981a1baa00433036375066e00dd6980c181a1baa004375a603060686ea8004cc0d8c064c0d0dd50021981b1809981a1baa0043303630123034375400897ae03301b00823330323371e6eb8c04cc0d4dd50009bae30143035375400a94128981b18199baa001133035302333035375066602a6eacc050c0ccdd50031bae301330333754602860666ea800cdd7180a18199baa3014303337540066606a602860666ea800ccc0d4c040c0ccdd50019981a980b18199baa003330353017303337540066606a603060666ea800ccc0d4c048c0ccdd50019981a980898199baa0034bd70003991980080080391299981a8008a60103d87a800013232533303353330333371e6eb8c050c0d8dd50011bae30153036375400c2a66606666ebcc05cc0d8dd5001180b981b1baa006153330333375e6032606c6ea8008c064c0d8dd50030a99981999baf301b303637540046036606c6ea80184cdc39bad3015303637540046eb4c050c0d8dd50030a5014a02940528098131981c00125eb804cc010010004c0e4008c0dc004cc05c0040b14cccccc0d4004400454cc0b80ac5854cc0b80ac5854cc0b80ac5854cc0b80ac58c0c8c0bcdd50008a99816a493365787065637420496e6c696e65446174756d286c6f616e5f6f666665725f646174756d29203d206f75747075742e646174756d0016300b302e3754002601c605a6ea8c0c0008cc88c8cc00400400c894ccc0bc00452f5c026464a66605a603e605e6ea80044cc0100100084cc0c8c0ccc0c0dd50009980200200119192999817180e18181baa00113232323232533303353330333370e6eb4c050c0d8dd500219299981a1813181b1baa0011375a6074606e6ea800454cc0d52401396578706563742046696e697465286c6f7765725f626f756e6429203d2072616e67652e6c6f7765725f626f756e642e626f756e645f747970650016301630363754602c606c6ea8c054c0d8dd5180b181b1baa02815333033002100114a029404c098cc0e0c098cc0e0c058c0d8dd50021981c180b981b1baa0043303837506660306eacc05cc0d8dd50039bae3016303637546026606c6ea8010dd7180b981b1baa301330363754008660706026606c6ea8010cc0e0c064c0d8dd50021981c180d181b1baa00433038301530363754008660706036606c6ea80112f5c097ae014c0103d87a80003370e6eb4c0e0c0e4c0e4c0e4c0e4c0e4c0e4c0e4c0e4c0d4dd50019bad30163035375401466e1cdd6981b981c181c181c181c181c181c181c181c181c181a1baa002375a602860686ea80254ccc0c0c084c0c8dd5000899299981a8008a998190180b09919299981b8008a9981a0190b09919299981c8008a9981b01a0b09919299981d8008a9981c01b0b09919299981e8008a9981d01c0b09919299981f8008a9981e01d0b0991929998208008a9981f01e0b0991929998218008a9982001f0b0991929998228008a998210200b0991929998238008a998220210b0991929998248008a998230220b09929998251826801099191924c6606601e08e6606402408c6606202608a2a6608e08a2c64a66666609c0022a6608e08a2c2a6608e08a2c2a6608e08a2c2a6608e08a2c26eb8004c12c004c12c008c94cccccc13000454cc11410c5854cc11410c5854cc11410c584dd68008a998228218b182480098248011929999998250008a998218208b0a998218208b0a998218208b09bad00115330430411630470013047002325333333048001153304103f16153304103f16153304103f16153304103f161375c002608a002608a00464a66666608c0022a6607e07a2c2a6607e07a2c2a6607e07a2c26eb400454cc0fc0f458c10c004c10c008c94cccccc11000454cc0f40ec5854cc0f40ec5854cc0f40ec584dd68008a9981e81d8b1820800982080119299999982100088008a9981d81c8b0a9981d81c8b0a9981d81c8b0a9981d81c8b181f800981f8011929999998200008a9981c81b8b0a9981c81b8b0a9981c81b8b09bad001153303903716303d001303d00232533333303e0011001153303703516153303703516153303703516153303703516303b001303b00232533333303c00110011533035033161533035033161533035033161533035033163039001303900232533333303a0011533033031161533033031161533033031161375a0022a660660622c606e00260666ea800454cc0c40bc594cccccc0dc004400454cc0c00b85854cc0c00b85854cc0c00b85854cc0c00b858c0d0c0c4dd50008a99817a493365787065637420496e6c696e65446174756d28636f6c6c61746572616c5f646174756d29203d206f75747075742e646174756d0016300d3030375400260640046064002660226eb0c01cc0a8dd5180518151baa01c2325333029301b302b3754002266e3c080dd7181798161baa00114a0601660566ea8c02cc0acdd50009919199800800801a60106d8799f0000ff00222533302f0021001133300300330320023232533302d301b302f3754002264646460466606a6ea0cdc01bad30133033375400c66602a6eacc050c0ccdd5180a18199baa005375c602660666ea8c050c0ccdd50011bae301430333754602860666ea8008cc0d4dd419b80375a602860666ea8018dd6980b98199baa0024bd701980c000816299999981b00088008a998178158b0a998178158b0a998178158b0a998178158b181998181baa001153302e4913365787065637420496e6c696e65446174756d286c6f616e5f646174756d29203d20696e7075742e6f75747075742e646174756d0016300c302f37546020605e6ea8004c0c4008dd6180518151baa300a302a3754038660206eb0c024c0a4dd5180498149baa01b2325333028301a302a3754002266e3c00cdd7181718159baa00114a0601460546ea8c028c0a8dd5180598151baa00130010012253330290011480004cdc0240046600400460580026002002444a6660500022004266600600664646600200200844a666056002297ae01323253330293375e00400a200226605c00466008008002605e004605a002605400260560024604e605060500024604c604e604e604e604e604e604e0024604a604c604c604c604c604c604c604c0024604800246046604800244464a66603e602260426ea8004520001375a604a60446ea8004c94ccc07cc044c084dd50008a6103d87a8000132330010013756604c60466ea8008894ccc094004530103d87a8000132323253330243371e00e6eb8c09800c4c05ccc0a4dd4000a5eb804cc014014008dd698130011814801181380099198008008021129998120008a6103d87a8000132323253330233371e00e6eb8c09400c4c058cc0a0dd3000a5eb804cc014014008dd5981280118140011813000918109811181118110009181018109810981098108009180f9810181018101810181000091299980c9805180d9baa002132533301e001153301b00216132325333020001153301d00416132325333022001153301f00616132325333024001153302100816132325333026001153302300a16132325333028001153302500c1613232533302a001153302700e1613232533302c001153302901016132533302d30300021323232498cc05801c04ccc054028048cc05003404454cc0a804458c94cccccc0c400454cc0a80445854cc0a80445854cc0a80445854cc0a8044584dd7000981700098170011929999998178008a998140078b0a998140078b0a998140078b09bad001153302800f16302c001302c00232533333302d0011001153302600d16153302600d16153302600d16153302600d16302a001302a00232533333302b001153302400b16153302400b16153302400b161375a0022a660480162c6050002605000464a66666605200220022a660440122c2a660440122c2a660440122c2a660440122c604c002604c00464a66666604e0022a6604000e2c2a6604000e2c2a6604000e2c26eb400454cc08001c58c090004c090008c94cccccc094004400454cc0780145854cc0780145854cc0780145854cc07801458c088004c088008c94cccccc08c00454cc07000c5854cc07000c5854cc07000c584dd68008a9980e0018b1810000980e1baa002153301a0011622323300100100322533301e00114bd7009919299980e1802801099810801198020020008998020020009811001181000091299980b9804180c9baa002132533301c00115330190021613232533301e001153301b00416132533301f3022002149854cc07001458c94cccccc08c00454cc0700145854cc0700145854cc0700145854cc070014584dd7000981000098100011929999998108008a9980d0018b0a9980d0018b0a9980d0018b0a9980d0018b09bae001301e001301a37540042a660300022c6eb8c06cc060dd50008a9980b0080b180d180b9baa001153301500f163019301637540046e1d2004153301349015865787065637420536372697074436f6e74657874207b207472616e73616374696f6e3a205f74782c20707572706f73653a20576974686472617746726f6d287374616b655f6372656429207d203d0a2020202020206374780016301730183014375400c2930a998092491856616c696461746f722072657475726e65642066616c736500136565333333018006153301100c16153301100c16153301100c161375a00c2a660220182c2a660229211d52756e6e696e672033206172672076616c696461746f72207370656e64001332322323225333016325333017300830193754600260346ea80104cc88c8cc00400400c894ccc07c004528099299980e19b8f375c604400400829444cc00c00c004c088004dd6180e980f180f180f180f180f180f180f180f180d1baa3001301a37540046eb8c074c078c078c078c078c078c078c078c068dd50038991919299980d1806180e1baa0011323322323300100100322533302300114a0264a66604066ebc010c088c09800852889980180180098130009bab3021302230223022302230223022001300e330203005301e37546042603c6ea8cc88c8cc00400400c894ccc08c00454cc08124011b657870656374205b696e7075742c202e2e5d203d20696e70757473001613253330203375e601460466ea80040104c098c09cc08cdd5000899801801981380118128009bac30210013021301e375400497ae0301d37540042a6603692014765787065637420536372697074436f6e74657874207b207472616e73616374696f6e3a2074782c20707572706f73653a205370656e64286f776e5f72656629207d203d206374780016301f3020002301e001301a37540044603a0022930a9980ba491856616c696461746f722072657475726e65642066616c736500136565333014300530163754002264a6660320022a6602c01c2c264a666034603a0042649319299980b9804000899299980e0008a9980c8088b099299980e98100010a4c2a660340242c64a6666660420022a660340242c2a660340242c2a660340242c26eb400454cc06804858c078004c068dd50010a99980b9804800899299980e0008a9980c8088b099299980e98100010a4c2a660340242c64a6666660420022a660340242c2a660340242c2a660340242c26eb400454cc06804858c078004c068dd50010a9980c0080b180c1baa001153301700f1632533333301e0011001153301700f16153301700f16153301700f16153301700f16301b001301737540022a6602a01a2ca66666603600220022a660280182c2a660280182c2a660280182c2a660280182c64a666024600660286ea80084c94ccc05c00454cc050034584c8c94ccc06400454cc05803c584c8c94ccc06c00454cc060044584c8c94ccc07400454cc06804c584c8c94ccc07c00454cc070054584c8c94ccc08400454cc07805c584c8c94ccc08c00454cc080064584c8c94ccc09400454cc08806c584c94ccc098c0a40084c8c8c9263301300701e3301200a01d3301100d01c153302301c1632533333302a001153302301c16153302301c16153302301c16153302301c161375c002604e002604e00464a6666660500022a660420342c2a660420342c2a660420342c26eb400454cc08406858c094004c094008c94cccccc098004400454cc07c0605854cc07c0605854cc07c0605854cc07c06058c08c004c08c008c94cccccc09000454cc0740585854cc0740585854cc074058584dd68008a9980e80b0b1810800981080119299999981100088008a9980d80a0b0a9980d80a0b0a9980d80a0b0a9980d80a0b180f800980f8011929999998100008a9980c8090b0a9980c8090b0a9980c8090b09bad001153301901216301d001301d00232533333301e0011001153301701016153301701016153301701016153301701016301b001301b00232533333301c001153301500e16153301500e16153301500e161375a0022a6602a01c2c6032002602a6ea800854cc04c03058894ccc04cc010c054dd5001099299980c0008a9980a8010b09919299980d0008a9980b8020b099299980d980f0010a4c2a6603000a2c64a66666603e0022a6603000a2c2a6603000a2c2a6603000a2c2a6603000a2c26eb8004c070004c070008c94cccccc07400454cc05800c5854cc05800c5854cc05800c5854cc05800c584dd7000980d000980b1baa00215330140011653333330180061006153301100a16153301100a16153301100a16153301100a1630163013375400a6e1d2000370e90011ba54800054cc0380045854cc0380045854cc0380045854cc03800459240191496e636f72726563742072656465656d6572207479706520666f722076616c696461746f72207370656e642e0a2020202020202020202020202020202020202020446f75626c6520636865636b20796f7520686176652077726170706564207468652072656465656d657220747970652061732073706563696669656420696e20796f757220706c757475732e6a736f6e00375c0029211272656465656d65723a2052656465656d657200490115646174756d3a204f666665724c6f616e446174756d0049014165787065637420496e6c696e652853637269707443726564656e7469616c286c6f616e5f76616c696461746f725f686173682929203d207374616b655f637265640049010e5f72656465656d65723a20496e7400490134657870656374206c6f616e5f646174756d5f74797065643a204f666665724c6f616e446174756d203d206c6f616e5f646174756d00490140657870656374206c6f616e5f6f666665725f646174756d5f74797065643a204f666665724c6f616e446174756d203d206c6f616e5f6f666665725f646174756d0049014165787065637420636f6c6c61746572616c5f646174756d5f74797065643a20436f6c6c61746572616c446174756d203d20636f6c6c61746572616c5f646174756d005734ae7155ceaab9e5573eae815d0aba257481";

  const interestValidator = bytesToValidator(interestValidatorCBOR);
  const interestValidatorHash =
    lucid.utils.validatorToScriptHash(interestValidator);
  const interestScriptAddress =
    lucid.utils.validatorToAddress(interestValidator);

  const collateralValidator: SpendingValidator = {
    type: "PlutusV2",
    script: applyDoubleCborEncoding(
      applyParamsToScript(collateralValidatorCBOR, [interestValidatorHash])
    ),
  };
  const collateralStakingValidator: WithdrawalValidator = {
    type: "PlutusV2",
    script: collateralValidator.script,
  };
  const collateralValidatorHash =
    lucid.utils.validatorToScriptHash(collateralValidator);

  const loanValidator: SpendingValidator = {
    type: "PlutusV2",
    script: applyDoubleCborEncoding(
      applyParamsToScript(loanValidatorCBOR, [collateralValidatorHash])
    ),
  };
  const loanStakingValidator: WithdrawalValidator = {
    type: "PlutusV2",
    script: loanValidator.script,
  };

  const collateralScriptAddress =
    lucid.utils.validatorToAddress(collateralValidator);
  const collateralRewardAddress = lucid.utils.validatorToRewardAddress(
    collateralStakingValidator
  );

  const loanRewardAddress =
    lucid.utils.validatorToRewardAddress(loanStakingValidator);
  const loanScriptAddress = lucid.utils.validatorToAddress(loanValidator);

  return {
    collateralValidator,
    collateralStakingValidator,
    collateralRewardAddress,
    collateralScriptAddress,
    loanValidator,
    loanStakingValidator,
    loanRewardAddress,
    loanScriptAddress,
    interestValidator,
    interestScriptAddress,
  };
}
